<html> 
<head>
    <title>COVID-19 Janvier 2022</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="keywords" content="" />
    <meta name="description" content="" />
    <link href="default.css" rel="stylesheet" type="text/css" media="all" />
    <link href="fonts.css" rel="stylesheet" type="text/css" media="all" />
    <link rel="stylesheet" href="leaflet.css" />
    <link rel="stylesheet" href="jquery-ui.css" type="text/css">
    <link rel="stylesheet" href="leaflet.css" />
    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico" />
    <script src="leaflet.js"></script>
	<script src="jquery-1.9.1.min.js"></script>
    <script src="jquery-ui.js"></script>
    <script src="myjson.geojson" type="text/javascript" ></script>

    <style>
		.info {
		    padding: 6px 8px;
		    font: 14px/16px Arial, Helvetica, sans-serif;
		    background: white;
		    background: rgba(255,255,255,0.8);
		    box-shadow: 0 0 15px rgba(0,0,0,0.2);
		    border-radius: 5px;
		}
		.info h4 {
		    margin: 0 0 5px;
		    color: #777;
		}
        .legend { 
            text-align: left; 
            line-height: 18px; 
            color: #555; 
        } 
        .legend i { 
        width: 18px; 
        height: 18px; 
        float: left; 
        margin-right: 8px; 
        opacity: 0.7; 
        }
        body{ background-color: #f7f1ee;}
        h1{
            text-align: center;
            text-size-adjust: 20px;
            border: solid ;
            color: #3471f5;
            
        }
        h3{text-align: center;
            color: #4a9dfb;
            font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;
            line-height: 0cm;
        }
       
	</style>
</head>
<body>
    <h1>Carte choroplèthe de l'évolution de la pandémie COVID-19</h1>
    <h3>Région Rabat Salé Kénitra 
    Du 03/01/2022 au 09/01/2022</h3>



<div id="wrapper">

    <script src="myjson.geojson" type="text/javascript" ></script>

        <center><div id="mapid" style="width: 1300px; height: 500px;"></div></center>
        <div class="leaflet-top leaflet-right"><div class="info leaflet-control">
		<script src="SliderControl.js"></script>
            <script>
             var sliderControl = null;
        var mymap = L.map('mapid').setView([34.025952, -6.836715], 4);
  				L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
        attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
    }).addTo(mymap);
        L.geoJson(mydata).addTo(mymap);

function getColor(d) {
    return d >= 50   ? '#99000d' :
           d >= 40   ? '#cb181d' :
           d >= 30   ? '#ef3b2c' :
           d >= 20   ? '#fb6a4a' :
           d >= 10   ? '#fc9272' :
           d >= 5    ? '#fcbba1' :
                    '#fee5d9';
}

function style7(f) {
    return {
        fillColor: getColor(f.properties.jan9),
        weight: 2,
        opacity: 1,
        color: 'white',
        dashArray: '3',
        fillOpacity: 0.7
    };
}
function style6(f) {
    return {
        fillColor: getColor(f.properties.jan8),
        weight: 2,
        opacity: 1,
        color: 'white',
        dashArray: '3',
        fillOpacity: 0.7
    };
}
function style5(f) {
    return {
        fillColor: getColor(f.properties.jan7),
        weight: 2,
        opacity: 1,
        color: 'white',
        dashArray: '3',
        fillOpacity: 0.7
    };
}
function style4(f) {
    return {
        fillColor: getColor(f.properties.jan6),
        weight: 2,
        opacity: 1,
        color: 'white',
        dashArray: '3',
        fillOpacity: 0.7
    };
}
function style3(f) {
    return {
        fillColor: getColor(f.properties.jan5),
        weight: 2,
        opacity: 1,
        color: 'white',
        dashArray: '3',
        fillOpacity: 0.7
    };
}
function style2(f) {
    return {
        fillColor: getColor(f.properties.jan4),
        weight: 2,
        opacity: 1,
        color: 'white',
        dashArray: '3',
        fillOpacity: 0.7
    };
}
function style1(f) {
    return {
        fillColor: getColor(f.properties.jan3),
        weight: 2,
        opacity: 1,
        color: 'white',
        dashArray: '3',
        fillOpacity: 0.7
    };
}           
        function highlightFeature(e) {
            var layer = e.target;

            layer.setStyle({
                weight: 5,
                color: '#666',
                dashArray: '',
                fillOpacity: 0.7
            }).addTo(mymap);   
            if (!L.Browser.ie && !L.Browser.opera && !L.Browser.edge) {
               layer.bringToFront();
            }
               info.update(layer.feature.properties);
        
        }

        var geojson1;

        function resetHighlight1(e) {
            geojson1.resetStyle(e.target);
            
        }
        var geojson2;

        function resetHighlight2(e) {
            geojson2.resetStyle(e.target);
            
        }
        var geojson3;

        function resetHighlight3(e) {
            geojson3.resetStyle(e.target);
        
        var geojson4;  
        }
          function resetHighlight4(e) {
            geojson4.resetStyle4(e.target);
            
        }
        var geojson5;

        function resetHighlight5(e) {
            geojson5.resetStyle(e.target);
            
        }
        var geojson6;

        function resetHighlight6(e) {
            geojson6.resetStyle(e.target);
            
        var geojson7;
        }  function resetHighlight7(e) {
            geojson7.resetStyle(e.target);
            
        }
        
        
        function zoomToFeature(e) {
            mymap.fitBounds(e.target.getBounds());
        }

        function onEachFeature1(f, layer) {
            layer.on({
                mouseover: highlightFeature,
                mouseout: resetHighlight1,
                click: zoomToFeature
            });
        }
         function onEachFeature2(f, layer) {
            layer.on({
                mouseover: highlightFeature,
                mouseout: resetHighlight2,
                click: zoomToFeature
            });
        }
        function onEachFeature3(f, layer) {
            layer.on({
                mouseover: highlightFeature,
                mouseout: resetHighlight3,
                click: zoomToFeature
            });
        }
        
        function onEachFeature4(f, layer) {
            layer.on({
                mouseover: highlightFeature,
                mouseout: resetHighlight4,
                click: zoomToFeature
            });
        }
         function onEachFeature5(f, layer) {
            layer.on({
                mouseover: highlightFeature,
                mouseout: resetHighlight5,
                click: zoomToFeature
            });
        }
        function onEachFeature6(f, layer) {
            layer.on({
                mouseover: highlightFeature,
                mouseout: resetHighlight6,
                click: zoomToFeature
            });
        }                
        function onEachFeature7(f, layer) {
            layer.on({
                mouseover: highlightFeature,
                mouseout: resetHighlight7,
                click: zoomToFeature
            });
        }
        
        
        geojson1 = L.geoJson(mydata,{style: style1, onEachFeature: onEachFeature1, time: "Le 03/01/2022"
                }
        );
        geojson2 = L.geoJson(mydata,{style: style2, onEachFeature: onEachFeature2, time: "Le 04/01/2022"
                }
        );
        geojson3 = L.geoJson(mydata,{style: style3, onEachFeature: onEachFeature3, time: "Le 05/01/2022"
                }
        );
        geojson4 = L.geoJson(mydata,{style: style4, onEachFeature: onEachFeature4, time: "Le 06/01/2022"
                }
        );
        geojson5 = L.geoJson(mydata,{style: style5, onEachFeature: onEachFeature5, time: "Le 07/01/2022"
                }
        );
        geojson6 = L.geoJson(mydata,{style: style6, onEachFeature: onEachFeature6, time: "Le 08/01/2022"
                }
        );
        geojson7 = L.geoJson(mydata,{style: style7, onEachFeature: onEachFeature7, time: "Le 09/01/2022"
                }
        );
        
        var info = L.control();

    info.onAdd = function (mymap) {
        this._div = L.DomUtil.create('div', 'info'); // create a div with a class "info"
        this.update();
        return this._div;
};

// method that we will use to update the control based on feature properties passed
    info.update = function (p) {
        this._div.innerHTML = '<h4>Cas contaminés en pourcentage</h4>' +  (p ?
        'Province  : <b>' + p.NAME +  '</sup>'
        : 'Veuillez mettre le curseur sur une province');
    };
    info.addTo(mymap);  
        
         layerGroup = L.layerGroup([geojson1, geojson2, geojson3, geojson4, geojson5, geojson6, geojson7]);
        var sliderControl = L.control.sliderControl({layer:layerGroup, follow: true});
        mymap.addControl(sliderControl);
        sliderControl.startSlider();


    var legend = L.control({position: 'bottomright'});

    legend.onAdd = function (mymap) {
        var div = L.DomUtil.create('div', 'info legend');
        var grades = [0, 5, 10, 20, 30, 40, 50];
        var labels = [];
        var from, to;

        for (var i = 0; i < grades.length; i++) {
            from = grades[i];
            to = grades[i + 1];
            
            labels.push(
                 '<i style="background:' + getColor(from + 1) + '"></i> ' +
                 from + (to ? '&ndash;' + to : '+'));
        }

    div.innerHTML = labels.join('<br>');
    return div;
};

legend.addTo(mymap);
</script>

</body>
</html>
